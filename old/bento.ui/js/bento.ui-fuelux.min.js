/**
 * Bento.UI FuelUX
 *
 * @version 0.7.9
 * @date 2013-12-17
 */

!function(a){function b(b,c){return(b.textContent||b.innerText||a(b).text()||"").toLowerCase()===(c||"").toLowerCase()}"use strict",a.expr[":"].fuelTextExactCI=a.expr.createPseudo?a.expr.createPseudo(function(a){return function(c){return b(c,a)}}):function(a,c,d){return b(a,d[3])}}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.tree.defaults,c),this.$element.on("click",".fuelux-tree-item",a.proxy(function(a){this.selectItem(a.currentTarget)},this)),this.$element.on("click",".fuelux-tree-folder-header",a.proxy(function(a){this.selectFolder(a.currentTarget)},this)),this.render()};b.prototype={constructor:b,render:function(){this.populate(this.$element)},populate:function(b){var c=this,d=b.parent().find(".fuelux-tree-loader:eq(0)");d.show(),this.options.dataSource.data(b.data(),function(e){d.hide(),a.each(e.data,function(a,d){var e;d.type==="folder"?(e=c.$element.find(".fuelux-tree-folder:eq(0)").clone().show(),e.find(".fuelux-tree-folder-name").html(d.name),e.find(".fuelux-tree-loader").html(c.options.loadingHTML),e.find(".fuelux-tree-folder-header").data(d)):d.type==="item"&&(e=c.$element.find(".fuelux-tree-item:eq(0)").clone().show(),e.find(".fuelux-tree-item-name").html(d.name),e.data(d)),b.hasClass("fuelux-tree-folder-header")?b.parent().find(".fuelux-tree-folder-content:eq(0)").append(e):b.append(e)}),c.$element.trigger("loaded")})},selectItem:function(b){var c=a(b),d=this.$element.find(".fuelux-tree-selected"),e=[];this.options.multiSelect?a.each(d,function(b,d){var f=a(d);f[0]!==c[0]&&e.push(a(d).data())}):d[0]!==c[0]&&(d.removeClass("fuelux-tree-selected").find("i").removeClass("icon-ok").addClass("fuelux-tree-dot"),e.push(c.data())),c.hasClass("fuelux-tree-selected")?(c.removeClass("fuelux-tree-selected"),c.find("i").removeClass("icon-ok").addClass("fuelux-tree-dot")):(c.addClass("fuelux-tree-selected"),c.find("i").removeClass("fuelux-tree-dot").addClass("icon-ok"),this.options.multiSelect&&e.push(c.data())),e.length&&this.$element.trigger("selected",{info:e})},selectFolder:function(b){var c=a(b),d=c.parent();c.find(".icon-folder-close").length?(d.find(".fuelux-tree-folder-content").children().length?d.find(".fuelux-tree-folder-content:eq(0)").show():this.populate(c),d.find(".icon-folder-close:eq(0)").removeClass("icon-folder-close").addClass("icon-folder-open"),this.$element.trigger("opened",c.data())):(this.options.cacheItems?d.find(".fuelux-tree-folder-content:eq(0)").hide():d.find(".fuelux-tree-folder-content:eq(0)").empty(),d.find(".icon-folder-open:eq(0)").removeClass("icon-folder-open").addClass("icon-folder-close"),this.$element.trigger("closed",c.data()))},selectedItems:function(){var b=this.$element.find(".fuelux-tree-selected"),c=[];return a.each(b,function(b,d){c.push(a(d).data())}),c}},a.fn.tree=function(c,d){var e,f=this.each(function(){var f=a(this),g=f.data("fuelux-tree"),h=typeof c=="object"&&c;g||f.data("fuelux-tree",g=new b(this,h)),typeof c=="string"&&(e=g[c](d))});return e===undefined?f:e},a.fn.tree.defaults={multiSelect:!1,loadingHTML:"<div>Loading...</div>",cacheItems:!0},a.fn.tree.Constructor=b}(window.jQuery);